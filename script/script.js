const questionsEasy = [
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "easy",
    question: "What does CPU stand for?",
    correct_answer: "Central Processing Unit",
    incorrect_answers: [
      "Central Process Unit",
      "Computer Personal Unit",
      "Central Processor Unit",
    ],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "easy",
    question:
      "In the programming language Java, which of these keywords would you put on a variable to make sure it doesn't get modified?",
    correct_answer: "Final",
    incorrect_answers: ["Static", "Private", "Public"],
  },
  {
    category: "Science: Computers",
    type: "boolean",
    difficulty: "easy",
    question: "The logo for Snapchat is a Bell.",
    correct_answer: "False",
    incorrect_answers: ["True"],
  },
  {
    category: "Science: Computers",
    type: "boolean",
    difficulty: "easy",
    question:
      "Pointers were not used in the original C programming language; they were added later on in C++.",
    correct_answer: "False",
    incorrect_answers: ["True"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "easy",
    question:
      "What is the most preferred image format used for logos in the Wikimedia database?",
    correct_answer: ".svg",
    incorrect_answers: [".png", ".jpeg", ".gif"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "easy",
    question: "In web design, what does CSS stand for?",
    correct_answer: "Cascading Style Sheet",
    incorrect_answers: [
      "Counter Strike: Source",
      "Corrective Style Sheet",
      "Computer Style Sheet",
    ],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "easy",
    question:
      "What is the code name for the mobile operating system Android 7.0?",
    correct_answer: "Nougat",
    incorrect_answers: ["Ice Cream Sandwich", "Jelly Bean", "Marshmallow"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "easy",
    question: "On Twitter, what is the character limit for a Tweet?",
    correct_answer: "140",
    incorrect_answers: ["120", "160", "100"],
  },
  {
    category: "Science: Computers",
    type: "boolean",
    difficulty: "easy",
    question: "Linux was first created as an alternative to Windows XP.",
    correct_answer: "False",
    incorrect_answers: ["True"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "easy",
    question:
      "Which programming language shares its name with an island in Indonesia?",
    correct_answer: "Java",
    incorrect_answers: ["Python", "C", "Jakarta"],
  },
];

const questionsMedium = [
  {
    category: "Science: Computers",
    type: "boolean",
    difficulty: "medium",
    question: "FLAC stands for 'Free Lossless Audio Condenser'",
    correct_answer: "False",
    incorrect_answers: ["True"],
  },

  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "medium",
    question: "What five letter word is the motto of the IBM Computer company?",
    correct_answer: "Think",
    incorrect_answers: ["Click", "Logic", "Pixel"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "medium",
    question: "Nvidia's headquarters are based in which Silicon Valley city?",
    correct_answer: "Santa Clara",
    incorrect_answers: ["Palo Alto", "Cupertino", "Mountain View"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "medium",
    question: "What was the name given to Android 4.3?",
    correct_answer: "Jelly Bean",
    incorrect_answers: ["Lollipop", "Nutella", "Froyo"],
  },
  {
    category: "Science: Computers",
    type: "boolean",
    difficulty: "medium",
    question:
      "To bypass US Munitions Export Laws, the creator of the PGP published all the source code in book form. ",
    correct_answer: "True",
    incorrect_answers: ["False"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "medium",
    question: "Generally, which component of a computer draws the most power?",
    correct_answer: "Video Card",
    incorrect_answers: ["Hard Drive", "Processor", "Power Supply"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "medium",
    question:
      "What is the correct term for the metal object in between the CPU and the CPU fan within a computer system?",
    correct_answer: "Heat Sink",
    incorrect_answers: ["CPU Vent", "Temperature Decipator", "Heat Vent"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "medium",
    question:
      "In programming, the ternary operator is mostly defined with what symbol(s)?",
    correct_answer: "?:",
    incorrect_answers: ["??", "if then", "?"],
  },
  {
    category: "Science: Computers",
    type: "boolean",
    difficulty: "medium",
    question:
      "Early RAM was directly seated onto the motherboard and could not be easily removed.",
    correct_answer: "True",
    incorrect_answers: ["False"],
  },
  {
    category: "Science: Computers",
    type: "boolean",
    difficulty: "medium",
    question:
      "The last Windows operating system to be based on the Windows 9x kernel was Windows 98.",
    correct_answer: "False",
    incorrect_answers: ["True"],
  },
];

const questionsHard = [
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "hard",
    question:
      "What was the name of the security vulnerability found in Bash in 2014?",
    correct_answer: "Shellshock",
    incorrect_answers: ["Heartbleed", "Bashbug", "Stagefright"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "hard",
    question: "How many Hz does the video standard PAL support?",
    correct_answer: "50",
    incorrect_answers: ["59", "60", "25"],
  },
  {
    category: "Science: Computers",
    type: "boolean",
    difficulty: "hard",
    question: "DHCP stands for Dynamic Host Configuration Port.",
    correct_answer: "False",
    incorrect_answers: ["True"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "hard",
    question:
      "Dutch computer scientist Mark Overmars is known for creating which game development engine?",
    correct_answer: "Game Maker",
    incorrect_answers: ["Stencyl", "Construct", "Torque 2D"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "hard",
    question:
      "What is the name given to layer 4 of the Open Systems Interconnection (ISO) model?",
    correct_answer: "Transport",
    incorrect_answers: ["Session", "Data link", "Network"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "hard",
    question: "What vulnerability ranked #1 on the OWASP Top 10 in 2013?",
    correct_answer: "Injection ",
    incorrect_answers: [
      "Broken Authentication",
      "Cross-Site Scripting",
      "Insecure Direct Object References",
    ],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "hard",
    question: "Who invented the 'Spanning Tree Protocol?'",
    correct_answer: "Radia Perlman",
    incorrect_answers: ["Paul Vixie", "Vint Cerf", "Michael Roberts"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "hard",
    question:
      "Which of these is not a layer in the OSI model for data communications?",
    correct_answer: "Connection Layer",
    incorrect_answers: [
      "Application Layer",
      "Transport Layer",
      "Physical Layer",
    ],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "hard",
    question: "What was the name of the first Bulgarian personal computer?",
    correct_answer: "IMKO-1",
    incorrect_answers: ["Pravetz 82", "Pravetz 8D", "IZOT 1030"],
  },
  {
    category: "Science: Computers",
    type: "multiple",
    difficulty: "hard",
    question:
      "Lenovo acquired IBM's personal computer division, including the ThinkPad line of laptops and tablets, in what year?",
    correct_answer: "2005",
    incorrect_answers: ["1999", "2002", "2008"],
  },
];

// GENERAZIONE TIMER

let timer;

const countdown = function (n) {
  let timeLeft = n;
  timer = setInterval(function () {
    if (timeLeft <= 0) {
      clearInterval(timer);
    } else {
      document.getElementById("seconds").innerHTML = timeLeft;
    }
    timeLeft -= 1;
  }, 1000);
};

countdown(60);

// SEZIONE SCORE E SCOPE DEI VARI ELEMENTI

const quizSection = document.getElementById("question-section");
const quizElement = document.getElementById("question");
const buttonsContainer = document.getElementById("buttonsContainer");
const questionCounter = document.getElementById("question-counter");

let currentIndex = 0;
let score = 0;

const savedScore = localStorage.getItem("score");
if (savedScore !== null) {
  score = parseInt(savedScore); //SI REGISTRA LO SCORE IN LOCALE CON GETITEM
}

const chosenDifficulty = localStorage.getItem("difficulty");
if (chosenDifficulty !== null) {
  difficulty = parseInt(chosenDifficulty);
}

// CREAZIONE DOMANDE E ELEMENTI BUTTON

const getQuestion = function (arraySelected) {
  const actualQuestion = arraySelected[currentIndex];
  quizElement.textContent = actualQuestion.question;
  buttonsContainer.innerHTML = "";

  if (actualQuestion.type === "multiple") {
    const options = [...actualQuestion.incorrect_answers];
    const randomPosition = Math.floor(Math.random() * (options.length + 1));
    options.splice(randomPosition, 0, actualQuestion.correct_answer);

    options.forEach((opt) => {
      const buttons = document.createElement("button");
      buttons.textContent = opt;
      buttons.addEventListener("click", () =>
        answerChecking(opt, arraySelected)
      );
      buttonsContainer.appendChild(buttons);
    });
  } else if (actualQuestion.type === "boolean") {
    const buttonTrue = document.createElement("button");
    buttonTrue.textContent = "True";
    buttonTrue.addEventListener("click", () =>
      answerChecking("True", arraySelected)
    );
    buttonsContainer.appendChild(buttonTrue);

    const buttonFalse = document.createElement("button");
    buttonFalse.textContent = "False";
    buttonFalse.addEventListener("click", () =>
      answerChecking("False", arraySelected)
    );
    buttonsContainer.appendChild(buttonFalse);
  }
};

if (difficulty === 1) {
  getQuestion(questionsEasy);
} else if (difficulty === 2) {
  getQuestion(questionsMedium);
} else {
  getQuestion(questionsHard);
}

// CREAZIONE COUNTER DELLE DOMANDE CHE DINAMICAMENTE CAMBIA IN BASE ALL'INDICE DELLA DOMANDA

const counter = document.getElementById("question-counter");
counter.textContent = 1;

// FUNZIONE CHE FA UN CHECK DI TRUTHY OR FALSY SULLA DOMANDA

const answerChecking = function (chosenOption, arraySelected) {
  const actualQuestion = arraySelected[currentIndex];

  const buttonsAll = buttonsContainer.querySelectorAll("button");

  buttonsAll.forEach((button) => {
    if (button.textContent === actualQuestion.correct_answer) {
      button.classList.add("correct-answer");
    }

    button.disabled = true;
  });

  if (chosenOption === actualQuestion.correct_answer) {
    score++;
  }
  currentIndex++;
  counter.textContent = currentIndex + 1;
  if (currentIndex < arraySelected.length) {
    setTimeout(() => {
      getQuestion(arraySelected);
      startAnimation(); // DOPO OGNI DOMANDA RIPARTE IL TIMER E L'ANIMAZIONE DEL TIMER
      clearInterval(timer);
      countdown(60);
    }, 1000);
  } else {
    showResult();
  }
};

//SI SALVA LO SCORE IN LOCALE CON SET ITEM

const showResult = function () {
  window.open("results.html", "_self");
  localStorage.setItem("score", score);
};

//FUNZIONE CHE RIATTIVA ANIMAZIONE DEL TIIMER
const startAnimation = function () {
  const animationCircle = document.getElementById("animationCircle");
  animationCircle.beginElement();
};
